# ===========================================
# record-app 環境変数テンプレート
# ===========================================
# このファイルを .env にコピーして値を設定してください
# cp .env.example .env

# -------------------------------------------
# [必須] Supabase PostgreSQL 接続文字列（PgBouncer経由）
# -------------------------------------------
# 取得: Supabase Dashboard > Settings > Database > Connection string > Transaction mode
# プロジェクトID: dhwuekyutobpnocwhdut
# リージョン: ap-northeast-1
# フォーマット: postgresql://postgres.[ref]:[password]@aws-1-ap-northeast-1.pooler.supabase.com:6543/postgres?pgbouncer=true&connection_limit=1&statement_cache_size=0
#
# 注意: Vercelにデプロイする場合、このDATABASE_URLを環境変数に設定すること
#       Vercel Dashboard > Settings > Environment Variables
DATABASE_URL="postgresql://postgres.[ref]:[pw]@aws-1-ap-northeast-1.pooler.supabase.com:6543/postgres?pgbouncer=true&connection_limit=1&statement_cache_size=0"

# -------------------------------------------
# [必須] Supabase PostgreSQL 直接接続（マイグレーション用）
# -------------------------------------------
# 取得: Supabase Dashboard > Settings > Database > Connection string > Session mode
# 用途: Prisma migrateコマンド実行時に使用（pgbouncer非対応操作）
DIRECT_URL="postgresql://postgres.[ref]:[pw]@aws-1-ap-northeast-1.pooler.supabase.com:5432/postgres"

# -------------------------------------------
# [必須] Supabase プロジェクトURL
# -------------------------------------------
SUPABASE_URL="https://dhwuekyutobpnocwhdut.supabase.co"

# -------------------------------------------
# [必須/本番] Supabase Service Role Key
# -------------------------------------------
# サーバーサイドでRLSバイパスに使用（クライアントに絶対公開しない）
SUPABASE_SERVICE_ROLE_KEY=""

# -------------------------------------------
# [必須] Google Gemini APIキー
# -------------------------------------------
# 用途:
#   1. Next.js API経由での音声文字起こし (STT) + 日次提案生成
#   2. Supabase Edge Function (process-audio) での音声文字起こし
# 取得: https://aistudio.google.com/app/apikey
# モデル: gemini-2.0-flash
#
# 設定箇所:
#   - Next.js (Vercel): Vercel環境変数に設定
#   - Edge Function: Supabase Dashboard > Edge Functions > process-audio > Secrets
#                    GEMINI_API_KEY を設定（SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY は自動提供）
#
# 注意: Next.js側は環境変数未設定でもDB保存キー（/api/settings経由）で代替可能
GEMINI_API_KEY="AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"

# -------------------------------------------
# [推奨/本番必須] AES-256-GCM 暗号化キー
# -------------------------------------------
# 用途: ユーザー設定のGemini APIキーをDBに暗号化保存する際に使用
# 形式: 32バイトのhex文字列 (64文字)
# 生成: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# 未設定時: DATABASE_URLのSHA256ハッシュをフォールバック使用
ENCRYPTION_KEY=""

# -------------------------------------------
# [任意] Cronジョブ認証トークン
# -------------------------------------------
# 用途: /api/cron/archive-tasks の認証 (Authorization: Bearer <token>)
CRON_SECRET=""

# -------------------------------------------
# [任意] 開発環境認証バイパス
# -------------------------------------------
# NODE_ENV=development かつ DEV_AUTH_BYPASS=true の場合、認証をスキップ
DEV_AUTH_BYPASS="true"

# -------------------------------------------
# [任意] Upstash Redis（レートリミット）
# -------------------------------------------
# 未設定時はレートリミットをスキップ
UPSTASH_REDIS_REST_URL=""
UPSTASH_REDIS_REST_TOKEN=""
