# ===========================================
# record-app 環境変数テンプレート
# ===========================================
# このファイルを .env にコピーして値を設定してください
# cp .env.example .env

# -------------------------------------------
# [必須] Supabase PostgreSQL 接続文字列（PgBouncer経由）
# -------------------------------------------
# Supabase Dashboard > Settings > Database > Connection string > Transaction mode
DATABASE_URL="postgresql://postgres.[ref]:[pw]@aws-0-ap-northeast-1.pooler.supabase.com:6543/postgres?pgbouncer=true&connection_limit=1&statement_cache_size=0"

# -------------------------------------------
# [必須] Supabase PostgreSQL 直接接続（マイグレーション用）
# -------------------------------------------
# Supabase Dashboard > Settings > Database > Connection string > Session mode
DIRECT_URL="postgresql://postgres.[ref]:[pw]@aws-0-ap-northeast-1.pooler.supabase.com:5432/postgres"

# -------------------------------------------
# [必須] Supabase プロジェクトURL
# -------------------------------------------
SUPABASE_URL="https://dhwuekyutobpnocwhdut.supabase.co"

# -------------------------------------------
# [必須/本番] Supabase Service Role Key
# -------------------------------------------
# サーバーサイドでRLSバイパスに使用（クライアントに絶対公開しない）
SUPABASE_SERVICE_ROLE_KEY=""

# -------------------------------------------
# [必須] Google Gemini APIキー
# -------------------------------------------
# 用途: 音声文字起こし (STT) + 日次提案生成
# 取得: https://aistudio.google.com/app/apikey
# モデル: gemini-2.0-flash
# 注意: 環境変数未設定でもDB保存キー（/api/settings経由）で代替可能
GEMINI_API_KEY="AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"

# -------------------------------------------
# [推奨/本番必須] AES-256-GCM 暗号化キー
# -------------------------------------------
# 用途: ユーザー設定のGemini APIキーをDBに暗号化保存する際に使用
# 形式: 32バイトのhex文字列 (64文字)
# 生成: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# 未設定時: DATABASE_URLのSHA256ハッシュをフォールバック使用
ENCRYPTION_KEY=""

# -------------------------------------------
# [任意] Cronジョブ認証トークン
# -------------------------------------------
# 用途: /api/cron/archive-tasks の認証 (Authorization: Bearer <token>)
CRON_SECRET=""

# -------------------------------------------
# [任意] 開発環境認証バイパス
# -------------------------------------------
# NODE_ENV=development かつ DEV_AUTH_BYPASS=true の場合、認証をスキップ
DEV_AUTH_BYPASS="true"

# -------------------------------------------
# [任意] Upstash Redis（レートリミット）
# -------------------------------------------
# 未設定時はレートリミットをスキップ
UPSTASH_REDIS_REST_URL=""
UPSTASH_REDIS_REST_TOKEN=""
