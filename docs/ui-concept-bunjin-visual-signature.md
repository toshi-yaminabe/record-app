# UIコンセプト登録: 分人識別の強化（アプリ/WEB共通）

最終更新: 2026-02-19
対象: Flutterモバイルアプリ（`flutter_app/`） / Next.js Web（`app/`）

## 目的

「ふんわり」トーンを維持しつつ、**分人同士が混ざらない識別性**を追加する。  
色面積は増やさず、以下の要素で識別を強化する。

- 形（Icon/Shape）
- ラベル（Name + 1語説明）
- 区切り（左リボン）
- 配置（カード構造の固定）
- パターン（チャート導入時の布石）

---

## 適用スコープ（共通）

本仕様は、**同一ユーザーがアプリとWebを行き来しても識別体験が変わらないこと**を目的に、両クライアントで共通適用する。

- モバイル（Flutter）
  - 既存: `bunjin_chip.dart`
  - 将来: 分人カード/ダッシュボード/チャート
- Web（Next.js）
  - 既存: `bunjin-chip.js`, `bunjin-manager-view.js`
  - 将来: 分人カード/ダッシュボード/チャート

---

## 現行実装との整合方針

現時点では、両クライアントとも分人表現の中心は**チップ + 色**である。  
そのため当面は、次の順で段階導入する。

1. 既存チップに視覚署名（色 + アイコン + 形）を揃える
2. カード系コンポーネントに左リボンと固定ラベルを適用
3. チャート導入時に同じ署名/パターンを再利用

> 原則: 「先に共通ルールを確定 → 各画面へ段階適用」。

---

## UIコンセプト（登録ルール）

### 1. 分人の視覚署名を固定（Visual Signature）

分人ごとに、最低3点を固定する。

1. 色相（Hue）: 既存 `color`
2. アイコン（Icon）: 分人固有
3. 形（Shape）: 分人固有マーク形状

> 色だけで識別しない。色 + アイコン + 形の組み合わせを必須化する。

---

### 2. 左リボン（4〜6px）をカード識別の標準にする

カード全面は白ベースを維持し、左端の縦リボンのみ分人色を使う。

- 適用対象
  - 分人管理カード
  - 提案/タスクで分人関連を示すカード
  - 今後追加する分人サマリーカード
- 太さ: 4〜6px
- 目的: 視線の第一接触点で分人を即判定

---

### 3. ラベル表示は「分人名 + 1語説明」を省略禁止

凡例・カード・チップのいずれでも、可能な範囲で以下セットを維持する。

- 分人名（例: 個人）
- 1語説明（例: 回復）

推奨語彙（初期値）:

- 個人｜回復
- 社会｜役割
- 家庭｜安心
- コミュ｜つながり
- 自由｜任意

---

### 4. カード構造は固定し、差分は署名で出す

分人別に情報配置を変えない。構造固定で認知負荷を下げる。

1. 分人名 + アイコン
2. 満足度（★ / ゲージ）
3. 今日の一言
4. 推奨アクション（1件）

---

### 5. 「要ケア」タグで優先度を可視化

並び順だけでなく、1位カードにタグを明示する。

- タグ文言: `要ケア`
- 見た目: 薄い背景 + 分人色ボーダー
- 表示ルール: 最優先のみ

---

### 6. 色は増やさず、明度差と文字階層で固める

- 背景: オフホワイト固定
- カード: ほぼ白（微差 + 薄い影）
- テキスト階層
  - 見出し: チャコール濃
  - 本文: チャコール中
  - 補足: グレー

---

### 7. チャート導入時の識別ルール（先行定義）

将来ドーナツ/分布チャートを導入する場合は、分人セグメントに薄いパターンを付与する。

- 個人: ドット
- 社会: ストライプ
- 家庭: ウェーブ
- コミュ: 格子
- 自由: 無地

さらに中心表示に「現在優先分人」のアイコン + 名前 + 一言を置き、文脈を固定する。

---

## 分人視覚署名（初期登録値）

| 分人 | 色相 | アイコン | パターン |
|---|---|---|---|
| 個人 | ラベンダー系 | 自分（円） | ドット |
| 社会 | 青緑系 | 役割（四角） | ストライプ |
| 家庭 | 杏系 | 家（丸角家形） | ウェーブ |
| コミュ | 苔緑系 | 輪（リンク） | 格子 |
| 自由 | トープ系 | 星 | 無地 |

> 注: アイコンの最終ピクトは世界観に合わせて更新可。更新時も「色+アイコン+形」の3点固定原則は維持する。

---

## コンポーネント適用マッピング（アプリ/WEB共通運用）

| ルール | Flutter（アプリ） | Next.js（Web） |
|---|---|---|
| 視覚署名 | `flutter_app/lib/presentation/widgets/bunjin_chip.dart` | `app/components/bunjin-chip.js` |
| 左リボン | 分人カード追加時に適用 | `app/features/bunjins/bunjin-manager-view.js` のカードへ適用 |
| ラベル固定 | 分人チップ/カードで適用 | 分人チップ/カードで適用 |
| 要ケアタグ | ホーム/日次カード導入時に適用 | 日次/週次カード導入時に適用 |
| パターン | チャート導入時に適用 | チャート導入時に適用 |

---

## 今週の実装優先度（最小一歩）

1. 各分人のアイコン（形）を3案ずつ決定（共通）
2. アプリとWebの `BunjinChip` 表示仕様を同一化
3. ラベル（1語説明）をサーバーデータで保持するかUI辞書で持つか決定

---

## 受け入れ基準（Definition of Done）

- 分人識別が「色だけ」に依存していない
- 同一分人は、アプリ/Webを跨いでも同じ署名で表示される
- ラベル省略による意味欠落がない
- 既存の柔らかいトーン（背景/余白）を壊していない


---

## 実装タスク化（共通バックログ）

> 目的: 本コンセプトを「実装チケット」に落とし、アプリ/WEBで同じ粒度で進行管理する。

### Epic A: 視覚署名の基盤整備

- [ ] **A-1 分人アイコン候補定義（共通）**
  - 成果物: 5分人 × 各3案（SVG/絵文字/Material Symbols候補）
  - 完了条件: デザインレビューで1案に確定
- [ ] **A-2 1語説明ラベル辞書の定義（共通）**
  - 成果物: `個人/社会/家庭/コミュ/自由` の固定ラベル
  - 完了条件: API保持 or UI辞書保持の方式を意思決定
- [ ] **A-3 視覚署名トークン表の確定（共通）**
  - 成果物: `color / icon / shape / pattern` の1テーブル
  - 完了条件: アプリ/Webで同一キー名を使用

### Epic B: 既存UIへの適用（チップ→カード）

- [ ] **B-1 Flutter `bunjin_chip.dart` に icon + label 表示を反映**
  - 完了条件: 色以外（icon/shape）でも識別可能
- [ ] **B-2 Web `bunjin-chip.js` に icon + label 表示を反映**
  - 完了条件: Flutterと視覚構造が一致
- [ ] **B-3 Web 分人管理カードに左リボン（4〜6px）を適用**
  - 対象: `bunjin-manager-view.js`
  - 完了条件: カード全面色は増やさず識別できる
- [ ] **B-4 分人カード構造テンプレートを共通定義**
  - 構造: `分人名+アイコン / 満足度 / 今日の一言 / 推奨アクション1件`
  - 完了条件: 新規カード実装時にこの順序を固定

### Epic C: 優先度表示とチャート導入準備

- [ ] **C-1 「要ケア」タグ仕様実装**
  - ルール: 最優先カードのみ表示
  - 完了条件: 見た目（薄背景+色枠）が共通
- [ ] **C-2 チャートパターン定義の実装可能性確認**
  - 内容: ドット/ストライプ/ウェーブ/格子/無地
  - 完了条件: Flutter/Webで実装方式（Canvas/SVG/CSS）を決定
- [ ] **C-3 中心表示（現在優先分人）文言テンプレート作成**
  - 完了条件: `アイコン + 名前 + 一言` が両クライアントで同一

### 運用ルール（タスク管理）

- 進め方は **A → B → C** の順を原則とする。
- 実装PRには必ず「どのタスクID（A-1等）を完了したか」を記載する。
- アプリ/Webのどちらかのみ実装した場合は、未実装側のフォローアップタスクを同時起票する。

