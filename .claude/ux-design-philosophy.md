# UX設計思想 — record-app

## 1) 入力意図の要約（解釈）

- ユーザーは、**朝から夜までの生活ログ（音声）を土台**に、出来事・依頼タスク・知識を自動整理したい。
- 目的は単なる記録ではなく、**複数分野エージェントによる生活改善**（仕事/家庭/コミュニティ/趣味/休息）である。
- 毎日の振り返りと満足度フィードバックを通じて、提案の質を継続改善する。
- 今後の要件定義では、技術仕様より先に「この体験が実現されるか」を確認し続ける。

## 2) 体験ゴール（UX目標）

1. ユーザーが1日を振り返る際に「何があったか」「何をやるべきか」を短時間で把握できる。
2. ユーザーが修正したフィードバックが翌日以降の抽出精度向上に反映される。
3. ユーザーの満足度低下や過負荷の兆候を早期に検知し、行動提案できる。
4. 分野別エージェントの表示が直感的で、文脈の切替コストが低い。

## 3) ユーザー価値（Jobs to be Done）

- 記憶の外部化: 1日の出来事を忘れない。
- 実行の外部化: 依頼事項をタスク化して取りこぼさない。
- 判断の外部化: 満足度データを使ってより良い生活選択を支援する。
- 文脈の外部化: 分野別（仕事/家庭等）に知識を蓄積し再利用する。

## 4) 機能要件の整理（入力内容を構造化）

### A. 録音 → 非同期文字起こし

- 終日録音を保持。
- 非リアルタイムでローカルAI文字起こしもしくはサーバーAI文字起こしを実施。（ユーザーが明示選択）
- 端末負荷が高いときは処理を遅延し、余力があるときに実行。
- 話者分離は最低「オーナー / その他」を識別。
- タイムスタンプ付きで保存。
- 品質チェック合格後に音声データを削除。
- 不合格時は再文字起こし。

### B. コンテキスト推定とタグ付け

- 位置情報・曜日・滞在/移動状態で生活文脈を推定。
- 例: 通勤中 / 仕事中 / 家庭時間 / 外出中。
- セグメント単位で文字起こしを分割し、対象エージェントへタグ付け。

### C. 今日の出来事抽出

- 夕方〜夜のユーザー指定時刻に通知。
- その時点までの出来事を1時間粒度で要約。
- エージェント別セクション表示（色で判別可能）。

### D. タスク抽出

- 依頼事項を行動レベルのタスクとして抽出。
- ユーザーが採用するタスクのみをタスクリストへ保存。
- タスクリストで達成状況を追跡。

### E. ユーザーフィードバック

- 「出来事」「タスク」それぞれ正確性チェックを保存。
- 部分的誤りは編集後に保存可能。
- フィードバックを学習データとして精度改善へ反映。

### F. エージェント知識蓄積

- 分野別に語彙・人物名・プロジェクト情報等を保存。
- 将来タスク支援や提案生成で再利用。

### G. 満足度・幸福度トラッキング

- 毎日の振り返りで7件法×5問を入力。
- 高満足日の行動パターンを参照し、翌日の提案に活用。

## 5) UX上の重要論点（先に潰すべき点）

1. **常時録音への心理的負担**: 録音状態可視化、停止しやすさ、安心感が必要。
2. **電池/発熱/処理負荷**: 非同期処理の優先度制御と待機中の分かりやすい説明が必要。
3. **誤抽出の信頼低下**: 編集しやすさと再学習反映の透明性が必要。
4. **分野判定ミス**: タグ修正導線と手動再分類が必要。
5. **情報過多**: 日次レビュー画面で「重要イベント/重要タスク」を先頭提示する必要。

## 6) これからの入力整理フォーマット（提案）

今後の要件入力は、次の最小フォーマットで受け取ると設計速度が上がる。

```text
[対象機能]
- 例: タスク抽出

[ユーザーの困りごと]
- 例: 依頼を聞いたが後で忘れる

[理想体験]
- 例: 夜の振り返りで3分以内に明日の実行項目が確定する

[制約]
- 例: 端末バッテリー優先、通信なしでも動作

[受け入れ基準]
- 例: 抽出タスクの採用率が50%以上
```

---

## バックログ（Tier分類）

### Tier 1: CRITICAL (ブロッカー解消)

1. **W-1**: Prisma `$use`→`$extends` 移行 — Vercelデプロイ復旧
2. **A-1**: Flutter APK起動エラー修正 — アプリ起動復旧

### Tier 2: HIGH (UX体験強化)

3. **W-3**: 提案生成へのMemory連携 [E5]
4. **W-3**: 提案タスク作成時の分人紐付け [E2/E3]
5. **A-2**: セグメント分割5分→10分 [E1]

### Tier 3: MEDIUM (設計整合)

6. **W-2**: APIエンベロープ統一
7. **W-2**: transcribeルート共通化
8. **W-3**: 崩れパターン言語化 [E4]

### Tier 4: LOW (堅牢化)

9. **A-2**: 無音検出セグメント分割 [E1]
10. **A-2**: 自動分人割当Flutter実装 [E2]
